# ===========================================
# SERVER CONFIGURATION
# ===========================================
server.port=${SERVER_PORT:8080}

# ===========================================
# DATABASE CONFIGURATION (Supabase PostgreSQL)
# ===========================================
# Datasource (Supabase uses PostgreSQL)
# Prefer providing a full JDBC URL via SPRING_DATASOURCE_URL. Example:
# jdbc:postgresql://db.<project>.supabase.co:5432/postgres?sslmode=require
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# HikariCP Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=${SPRING_DATASOURCE_MAX_POOL_SIZE:10}
spring.datasource.hikari.connection-timeout=${SPRING_DATASOURCE_CONN_TIMEOUT:30000}
spring.datasource.hikari.minimum-idle=${SPRING_DATASOURCE_MIN_IDLE:5}
spring.datasource.hikari.idle-timeout=${SPRING_DATASOURCE_IDLE_TIMEOUT:600000}
spring.datasource.hikari.max-lifetime=${SPRING_DATASOURCE_MAX_LIFETIME:1800000}

# ===========================================
# JPA/HIBERNATE CONFIGURATION
# ===========================================
# Ensure Hibernate uses the PostgreSQL dialect
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Hibernate DDL auto mode (create, create-drop, update, validate, none)
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HBM2DDL:update}

# Show SQL queries in console (useful for debugging)
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}

# Format SQL for better readability
spring.jpa.properties.hibernate.format_sql=true

# Hibernate naming strategy (use snake_case for database columns)
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# ===========================================
# SUPABASE REST API CONFIGURATION
# ===========================================
# Supabase REST API base URL (including /rest/v1)
supabase.url=${SUPABASE_URL:}

# Supabase anon key (public, safe for client-side)
supabase.anon-key=${SUPABASE_ANON_KEY:}

# Supabase service role key (KEEP SECRET! Server-side only)
supabase.service-role-key=${SUPABASE_SERVICE_ROLE_KEY:}

# ===========================================
# SUPABASE AUTH CONFIGURATION
# ===========================================
# JWT Secret for validating Supabase tokens
# Get this from Supabase Dashboard > Settings > API > JWT Secret
supabase.jwt.secret=${SUPABASE_JWT_SECRET:your-super-secret-jwt-token-with-at-least-256-bits}


# ===========================================
# SWAGGER/OPENAPI CONFIGURATION
# ===========================================
# Swagger UI path
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true

# API Docs path
springdoc.api-docs.path=/v3/api-docs

# Group all APIs
springdoc.group-configs[0].group=cramer-api
springdoc.group-configs[0].paths-to-match=/**
